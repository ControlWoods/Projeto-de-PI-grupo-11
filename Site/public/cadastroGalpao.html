<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./CSS/CSS_cadastroGalpao.css">
    <title>Cadastro Galpão</title>
</head>
<body>
    <a href="projeto.html">
        <img class="logo" src="./assets/Logo/logoBlack.png">
    </a>
    <div class="formulario">
        <div class="container">
            <p class="input_galpao">Nome Galpão:</p>  <input type="text" id="input_nome_galpao" >
            <button onclick="cadastrarGalpao()">Cadastrar</button>
        </div>
    </div>
</body>
</html>

<script>
    function cadastrarGalpao() {
        var nomeGalpao = input_nome_galpao.value;
        var idEmpresa = sessionStorage.ID_USUARIO;

        fetch("/usuarios/galpao", {
         method: "POST",
         headers: {
             "Content-Type": "application/json",
         },
         body: JSON.stringify({
             // crie um atributo que recebe o valor recuperado aqui
             // Agora vá para o arquivo routes/usuario.js
             // nomeServer: nomeVar,
             // emailServer: emailVar,
             // senhaServer: senhaVar,
             // empresaServer: empresaVar
             idEmpresaServer: idEmpresa,
             nomeGalpaoServer: nomeGalpao

            //  nomeServer: nome,
            //  emailServer: email,
            //  senhaServer: senha,
            //  cnpjServer: cnpj,
            //  telFixoServer: telFixo,
            //  telCelularServer: telCelular
         }),
     })
         .then(function (resposta) {
             console.log("resposta: ", resposta);
             if (resposta.ok) {
                 // cardErro.style.dis
                 // mensagem_erro.innerHTML = "Cadastro realizado com sucesso! Redirecionando para tela de Login...";
                 alert("Cadastro realizado com sucesso! Redirecionando para tela de Login...");
                 setTimeout(() => {
                     window.location = "cadastroSensores.html";
                 }, "2000");
                 // limparFormulario();
                 // // finalizarAguardar();
             } else {
                 throw "Houve um erro ao tentar realizar o cadastro do galpão!";
             }
         })
         .catch(function (resposta) {
             console.log(`#ERRO: ${resposta}`);
             // finalizarAguardar();
         });
     return false;
    }
</script>